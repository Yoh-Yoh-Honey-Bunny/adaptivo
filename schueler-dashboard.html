<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sch√ºler Dashboard - Adaptivo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1>Willkommen zur√ºck! üëã</h1>
                <p class="welcome-text">
                    Hallo <strong id="userName"></strong>
                    <span class="badge">SCH√úLER</span>
                </p>
            </div>
            <div class="header-buttons">
                <a href="einstellungen.html" class="settings-button">‚öôÔ∏è Einstellungen</a>
                <button onclick="logout()" class="logout-button">Abmelden</button>
            </div>
        </div>
        
        <!-- Fortschritts-Panel -->
        <div class="stats-section">
            <h3 class="stats-title">üìä Deine Statistiken</h3>
            
            <div class="stats-toggle">
                <button class="toggle-btn active" onclick="zeigeStatistik('heute')">Heute</button>
                <button class="toggle-btn" onclick="zeigeStatistik('gesamt')">Gesamt</button>
            </div>
            
            <!-- Heute-Statistik -->
            <div class="progress-panel" id="statToday">
                <div class="stat-box">
                    <div class="stat-number" id="todayPoints">0</div>
                    <div class="stat-label">Punkte heute</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="todayCorrect">0</div>
                    <div class="stat-label">Richtig heute</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="todayQuizzes">0</div>
                    <div class="stat-label">√úbungen heute</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="todayStreak">0</div>
                    <div class="stat-label">üî• Tages-Streak</div>
                </div>
            </div>
            
            <!-- Gesamt-Statistik -->
            <div class="progress-panel" id="statTotal" style="display: none;">
                <div class="stat-box">
                    <div class="stat-number" id="totalPoints">0</div>
                    <div class="stat-label">Gesamt-Punkte</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="correctAnswers">0</div>
                    <div class="stat-label">Richtige Antworten</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="totalSubjects">1</div>
                    <div class="stat-label">Aktive F√§cher</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="totalQuizzes">0</div>
                    <div class="stat-label">Absolvierte √úbungen</div>
                </div>
            </div>
        </div>

        <!-- F√§cher-√úbersicht -->
        <div class="subjects-overview">
            <div class="subjects-header">
                <h2>üìö W√§hle dein Fach</h2>
                <p>Klicke auf ein Fach, um mit dem Lernen zu beginnen!</p>
            </div>
            
            <div class="subjects-grid">
                <!-- Biologie -->
                <a href="biologie-lernpfad.html" class="subject-card bio">
                    <div class="subject-icon">üß¨</div>
                    <h3>Biologie</h3>
                    <p>Zellen, Organismen & mehr</p>
                    <div class="subject-progress" id="bioProgress">
                        <div class="progress-item">Level <span id="bioLevel">1</span></div>
                        <div class="progress-item"><span id="bioDifficulty">Leicht</span></div>
                    </div>
                </a>
                
                <!-- Mathematik -->
                <div class="subject-card math coming-soon">
                    <div class="subject-icon">üî¢</div>
                    <h3>Mathematik</h3>
                    <p>Zahlen, Rechnen & Geometrie</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
                
                <!-- Deutsch -->
                <div class="subject-card deutsch coming-soon">
                    <div class="subject-icon">üìñ</div>
                    <h3>Deutsch</h3>
                    <p>Grammatik, Lesen & Schreiben</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
                
                <!-- Englisch -->
                <div class="subject-card english coming-soon">
                    <div class="subject-icon">üá¨üáß</div>
                    <h3>Englisch</h3>
                    <p>Vokabeln & Grammatik</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
                
                <!-- Geschichte -->
                <div class="subject-card geschichte coming-soon">
                    <div class="subject-icon">üèõÔ∏è</div>
                    <h3>Geschichte</h3>
                    <p>Epochen & Ereignisse</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
                
                <!-- Erdkunde -->
                <div class="subject-card erdkunde coming-soon">
                    <div class="subject-icon">üåç</div>
                    <h3>Erdkunde</h3>
                    <p>L√§nder & Kontinente</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
                
                <!-- Physik -->
                <div class="subject-card physik coming-soon">
                    <div class="subject-icon">‚öõÔ∏è</div>
                    <h3>Physik</h3>
                    <p>Kr√§fte & Energie</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
                
                <!-- Chemie -->
                <div class="subject-card chemie coming-soon">
                    <div class="subject-icon">üß™</div>
                    <h3>Chemie</h3>
                    <p>Elemente & Reaktionen</p>
                    <div class="subject-badge">Bald verf√ºgbar</div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script src="adaptive-learning.js"></script>
    <script src="settings.js"></script>
    <script>
        checkLogin();
        displayUserName();
        
        // Toggle zwischen Heute und Gesamt
        function zeigeStatistik(typ) {
            const buttons = document.querySelectorAll('.toggle-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (typ === 'heute') {
                document.getElementById('statToday').style.display = 'grid';
                document.getElementById('statTotal').style.display = 'none';
                buttons[0].classList.add('active');
            } else {
                document.getElementById('statToday').style.display = 'none';
                document.getElementById('statTotal').style.display = 'grid';
                buttons[1].classList.add('active');
            }
        }
        
        // Pr√ºfe ob neuer Tag und reset t√§gliche Statistik
        function pruefeTagesReset() {
            const heute = new Date().toDateString();
            const gespeichertTag = localStorage.getItem('letzterTag');
            
            if (gespeichertTag !== heute) {
                // Neuer Tag - reset t√§gliche Stats
                localStorage.setItem('letzterTag', heute);
                localStorage.setItem('dailyStats', JSON.stringify({
                    punkte: 0,
                    richtig: 0,
                    quizze: 0
                }));
                
                // Streak erh√∂hen wenn gestern aktiv war
                const gestern = new Date();
                gestern.setDate(gestern.getDate() - 1);
                if (gespeichertTag === gestern.toDateString()) {
                    let streak = parseInt(localStorage.getItem('streak') || '0');
                    streak++;
                    localStorage.setItem('streak', streak);
                } else if (!gespeichertTag) {
                    // Erster Tag
                    localStorage.setItem('streak', '0');
                } else {
                    // Streak unterbrochen
                    localStorage.setItem('streak', '0');
                }
            }
        }
        
        // Lade alle F√§cher-Fortschritte und zeige Statistiken
        function zeigeGesamtStatistiken() {
            pruefeTagesReset();
            
            const biologie = JSON.parse(localStorage.getItem('lernendenmodell_biologie')) || { 
                gesamtPunkte: 0, 
                richtigeAntworten: 0, 
                absolvierteQuizze: 0,
                level: 1,
                schwierigkeitsgrad: 'leicht'
            };
            
            const dailyStats = JSON.parse(localStorage.getItem('dailyStats')) || {
                punkte: 0,
                richtig: 0,
                quizze: 0
            };
            
            const streak = parseInt(localStorage.getItem('streak') || '0');
            
            // Gesamt-Statistiken
            const gesamtPunkte = biologie.gesamtPunkte;
            const gesamtRichtig = biologie.richtigeAntworten;
            const gesamtQuizze = biologie.absolvierteQuizze || 0;
            const aktiveFaecher = gesamtQuizze > 0 ? 1 : 0;
            
            document.getElementById('totalPoints').textContent = gesamtPunkte;
            document.getElementById('correctAnswers').textContent = gesamtRichtig;
            document.getElementById('totalSubjects').textContent = aktiveFaecher;
            document.getElementById('totalQuizzes').textContent = gesamtQuizze;
            
            // T√§gliche Statistiken
            document.getElementById('todayPoints').textContent = dailyStats.punkte;
            document.getElementById('todayCorrect').textContent = dailyStats.richtig;
            document.getElementById('todayQuizzes').textContent = dailyStats.quizze;
            document.getElementById('todayStreak').textContent = streak;
            
            // Zeige Biologie-Fortschritt auf der Karte
            const schwierigkeitTexte = {
                'leicht': 'Leicht',
                'mittel': 'Mittel',
                'schwer': 'Schwer'
            };
            document.getElementById('bioLevel').textContent = biologie.level;
            document.getElementById('bioDifficulty').textContent = schwierigkeitTexte[biologie.schwierigkeitsgrad];
        }
        
        zeigeGesamtStatistiken();
    </script>
</body>
</html>
